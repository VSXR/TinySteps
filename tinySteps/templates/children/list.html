{% extends 'base.html' %}
{% load static %}
{% load i18n %}

{% block title %}{% trans "Your Children - Tiny Steps" %}{% endblock %}

{% block main_contents %}
    <main id="main-content">
        <div class="container mt-5 mb-4">
            <!-- Page Header -->
            {% include "children/components/page_header.html" with title=_("Your Children") subtitle=_("Manage your children's information and track their development") %}

            <!-- Messages Container -->
            <div class="row">
                <div class="col">
                    <div id="messages-container" class="messages mb-3" role="alert" aria-live="polite">
                        {% if messages %}
                            {% include 'partials/messages.html' %}
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Add Child Button -->
            <div class="row mb-4">
                <div class="col text-end">
                    <a href="{% url 'children:add_child' %}" class="btn btn-primary rounded-pill shadow-sm" aria-label="{% trans 'Add a new child' %}">
                        <i class="fa-solid fa-plus me-2" aria-hidden="true"></i> {% trans "Add Child" %}
                    </a>
                </div>
            </div>

            <!-- Children List with Pagination -->
            <section aria-labelledby="children-list-heading" class="mb-5">
                <h3 id="children-list-heading" class="visually-hidden">{% trans "Your Children List" %}</h3>
                <div class="row">
                    {% if children %}
                        {% for child in children %}
                            <div class="col-md-6 col-lg-4 mb-4">
                                {% include "children/components/child_card.html" with child=child %}
                            </div>
                        {% endfor %}
                        
                        <!-- Pagination -->
                        {% if children.paginator.num_pages > 1 %}
                            <div class="col-12">
                                <nav aria-label="{% trans 'Children navigation' %}" class="mt-4">
                                    <ul class="pagination justify-content-center">
                                        {% if children.has_previous %}
                                            <li class="page-item">
                                                <a class="page-link rounded-pill px-3" href="?page=1" aria-label="{% trans 'First page' %}">
                                                    <span aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>
                                            <li class="page-item">
                                                <a class="page-link rounded-pill px-3" href="?page={{ children.previous_page_number }}" aria-label="{% trans 'Previous page' %}">
                                                    <i class="fa-solid fa-chevron-left" aria-hidden="true"></i>
                                                </a>
                                            </li>
                                        {% endif %}
                                        
                                        <li class="page-item active">
                                            <span class="page-link rounded-pill px-3">
                                                {% blocktrans with current=children.number total=children.paginator.num_pages %}{{ current }} of {{ total }}{% endblocktrans %}
                                            </span>
                                        </li>
                                        
                                        {% if children.has_next %}
                                            <li class="page-item">
                                                <a class="page-link rounded-pill px-3" href="?page={{ children.next_page_number }}" aria-label="{% trans 'Next page' %}">
                                                    <i class="fa-solid fa-chevron-right" aria-hidden="true"></i>
                                                </a>
                                            </li>
                                            <li class="page-item">
                                                <a class="page-link rounded-pill px-3" href="?page={{ children.paginator.num_pages }}" aria-label="{% trans 'Last page' %}">
                                                    <span aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        {% endif %}
                                    </ul>
                                </nav>
                            </div>
                        {% endif %}
                    {% else %}
                        {% include "children/components/empty_state.html" with message=_("You haven't added any children yet. Click the 'Add Child' button to get started!") show_button=True %}
                    {% endif %}
                </div>
            </section>

            <!-- Help Section -->
            <section aria-labelledby="help-section-heading" class="mt-5">
                <div class="row">
                    <div class="col-12">
                        <div class="card border-0 shadow-sm rounded-4 bg-light bg-opacity-75">
                            <div class="card-header bg-transparent border-0 pt-4">
                                <h3 id="help-section-heading" class="fs-4 mb-0 text-primary text-center">
                                    <i class="fa-solid fa-circle-info me-2" aria-hidden="true"></i>
                                    {% trans "Managing Your Children" %}
                                </h3>
                            </div>
                            <div class="card-body">
                                <p class="lead text-center text-muted mb-4">{% trans "In this section, you can:" %}</p>
                                <div class="row justify-content-center">
                                    <div class="col-lg-10">
                                        <div class="row row-cols-1 row-cols-md-2 g-4 mb-4">
                                            <div class="col">
                                                <div class="card h-100 border-light element-elevation">
                                                    <div class="text-center py-3">
                                                        <i class="fa-solid fa-circle-plus fs-1 text-primary" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="card-body text-center">
                                                        <h4 class="fs-6">{% trans "Add information about your children" %}</h4>
                                                        <p class="text-muted small">{% trans "Create profiles with important details about your children" %}</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="card h-100 border-light element-elevation">
                                                    <div class="text-center py-3">
                                                        <i class="fa-solid fa-flag fs-1 text-warning" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="card-body text-center">
                                                        <h4 class="fs-6">{% trans "Track important milestones in their development" %}</h4>
                                                        <p class="text-muted small">{% trans "Record and celebrate your child's developmental achievements" %}</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="card h-100 border-light element-elevation">
                                                    <div class="text-center py-3">
                                                        <i class="fa-solid fa-syringe fs-1 text-success" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="card-body text-center">
                                                        <h4 class="fs-6">{% trans "Keep a record of vaccinations and health check-ups" %}</h4>
                                                        <p class="text-muted small">{% trans "Maintain a comprehensive health record for your children" %}</p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="card h-100 border-light element-elevation">
                                                    <div class="text-center py-3">
                                                        <i class="fa-solid fa-calendar-days fs-1 text-info" aria-hidden="true"></i>
                                                    </div>
                                                    <div class="card-body text-center">
                                                        <h4 class="fs-6">{% trans "Manage their schedules and appointments" %}</h4>
                                                        <p class="text-muted small">{% trans "Keep track of important dates and activities" %}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="alert alert-info bg-opacity-25 text-center mb-0 mx-md-5">
                                    <p class="mb-0">{% blocktrans %}Each child's profile gives you access to their detailed information and helps you track their growth journey.{% endblocktrans %}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>
{% endblock main_contents %}