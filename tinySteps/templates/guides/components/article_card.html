{% load static %}
{% load i18n %}

<article class="card h-100 shadow-sm hover-card transition-300" role="article" aria-labelledby="article-title-{{ article.id }}">
    {% if article.image_url %}
        <img src="{{ article.image_url }}" class="card-img-top" 
             alt="{% blocktrans with title=article.title %}Image for article: {{ title }}{% endblocktrans %}" 
             loading="lazy" style="height: 180px; object-fit: cover;">
    {% else %}
        <div class="bg-light text-center py-5" aria-hidden="true">
            <i class="bi bi-journal-text display-4 text-muted"></i>
        </div>
    {% endif %}
    
    <div class="card-body d-flex flex-column">
        <h2 id="article-title-{{ article.id }}" class="card-title h5">{{ article.title|truncatechars:60 }}</h2>
        <p class="card-text text-muted small">
            <i class="bi bi-newspaper-fill me-1" aria-hidden="true"></i>
            <span class="visually-hidden">{% trans "Published by:" %}</span>
            {{ article.source_name }} 
            {% if article.author %}
                <span class="mx-1">|</span> 
                <i class="bi bi-person-fill me-1" aria-hidden="true"></i>
                <span class="visually-hidden">{% trans "Author:" %}</span>{{ article.author }}
            {% endif %}
        </p>
        <p class="card-text flex-grow-1">{{ article.description|truncatewords:20 }}</p>
    </div>
    
    <div class="card-footer bg-white border-top-0 d-flex justify-content-between align-items-center">
        <small class="text-muted">
            <i class="bi bi-calendar3 me-1" aria-hidden="true"></i>
            <span class="visually-hidden">{% trans "Publication date:" %}</span>
            {{ article.published_at|date:"M d, Y" }}
        </small>
        <div class="btn-group" role="group" aria-label="{% trans 'Article actions' %}">
            {% if section_type == 'nutrition' %}
                <a href="{% url 'nutrition_article_details' article.id %}" class="btn btn-sm btn-outline-secondary"
                   aria-label="{% blocktrans with title=article.title %}View details of {{ title }}{% endblocktrans %}" 
                   data-bs-toggle="tooltip" title="{% trans 'View article details' %}">
                    <i class="bi bi-info-circle me-1 d-none d-sm-inline" aria-hidden="true"></i>
                    {% trans "Details" %}
                </a>
                <a href="{{ article.url }}" class="btn btn-sm btn-outline-success" target="_blank" rel="noopener"
                   aria-label="{% blocktrans with title=article.title %}Read full article: {{ title }} (opens in new tab){% endblocktrans %}"
                   data-bs-toggle="tooltip" title="{% trans 'Opens in new tab' %}">
                    <i class="bi bi-book me-1 d-none d-sm-inline" aria-hidden="true"></i>
                    {% trans "Read" %} <i class="bi bi-box-arrow-up-right ms-1" aria-hidden="true"></i>
                </a>
            {% else %}
                <a href="{% url 'parenting_article_details' article.id %}" class="btn btn-sm btn-outline-secondary"
                   aria-label="{% blocktrans with title=article.title %}View details of {{ title }}{% endblocktrans %}"
                   data-bs-toggle="tooltip" title="{% trans 'View article details' %}">
                    <i class="bi bi-info-circle me-1 d-none d-sm-inline" aria-hidden="true"></i>
                    {% trans "Details" %}
                </a>
                <a href="{{ article.url }}" class="btn btn-sm btn-outline-primary" target="_blank" rel="noopener"
                   aria-label="{% blocktrans with title=article.title %}Read full article: {{ title }} (opens in new tab){% endblocktrans %}"
                   data-bs-toggle="tooltip" title="{% trans 'Opens in new tab' %}">
                    <i class="bi bi-book me-1 d-none d-sm-inline" aria-hidden="true"></i>
                    {% trans "Read" %} <i class="bi bi-box-arrow-up-right ms-1" aria-hidden="true"></i>
                </a>
            {% endif %}
        </div>
    </div>
</article>