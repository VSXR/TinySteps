{% load static %}
{% load i18n %}

<!-- Sidebar Component -->
<div class="sidebar-component">
    <!-- Related Guides Section -->
    {% if related_guides %}
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light">
            <h3 class="h5 mb-0">{% trans "Related Guides" %}</h3>
        </div>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush">
                {% for guide in related_guides %}
                <li class="list-group-item">
                    <a href="{% if guide.guide_type == 'parent' %}{% url 'parent_guide_details' guide.id %}{% else %}{% url 'nutrition_guide_details' guide.id %}{% endif %}" 
                       class="text-decoration-none">
                        <h4 class="h6 mb-1">{{ guide.title }}</h4>
                    </a>
                    <p class="small text-muted mb-0">{{ guide.desc|truncatechars:65 }}</p>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class="card-footer bg-white text-center">
            {% if section_type == 'nutrition' %}
                <a href="{% url 'nutrition_guides' %}" class="btn btn-sm btn-outline-success">{% trans "View All Nutrition Guides" %}</a>
            {% else %}
                <a href="{% url 'parents_guides' %}" class="btn btn-sm btn-outline-primary">{% trans "View All Parent Guides" %}</a>
            {% endif %}
        </div>
    </div>
    {% endif %}

    <!-- Tools Section -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light">
            <h3 class="h5 mb-0">{% trans "Helpful Tools" %}</h3>
        </div>
        <div class="card-body">
            {% if section_type == 'nutrition' %}
                <p>{% trans "Analyze the nutritional content of baby foods" %}</p>
                <a href="{% url 'nutrition_analyzer' %}" class="btn btn-success btn-sm d-block mb-3">
                    <i class="bi bi-calculator me-1"></i> {% trans "Baby Food Analyzer" %}
                </a>
            {% endif %}
            
            <p>{% trans "Track your baby's development and milestones" %}</p>
            <a href="#" class="btn btn-primary btn-sm d-block">
                <i class="bi bi-clipboard-check me-1"></i> {% trans "Track Milestones" %}
            </a>
        </div>
    </div>

    <!-- Recent Articles Section -->
    {% if recent_articles %}
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light">
            <h3 class="h5 mb-0">{% trans "Recommended Reading" %}</h3>
        </div>
        <div class="card-body p-0">
            <ul class="list-group list-group-flush">
                {% for article in recent_articles|slice:":3" %}
                <li class="list-group-item">
                    <h4 class="h6 mb-1">{{ article.title|truncatechars:60 }}</h4>
                    <p class="small text-muted mb-2">{{ article.source_name }} Â· {{ article.published_at|date:"M d" }}</p>
                    <a href="{{ article.url }}" class="btn btn-sm btn-link p-0" target="_blank" rel="noopener">
                        {% trans "Read" %} <i class="bi bi-arrow-right"></i>
                    </a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endif %}

    <!-- Contribute Section -->
    <div class="card mb-4 shadow-sm">
        <div class="card-header bg-light">
            <h3 class="h5 mb-0">{% trans "Share Your Knowledge" %}</h3>
        </div>
        <div class="card-body">
            <p>{% trans "Help other parents by sharing your experiences and knowledge." %}</p>
            {% if section_type == 'nutrition' %}
                <a href="{% url 'submit_guide' %}?type=nutrition" class="btn btn-outline-success btn-sm d-block">
                    <i class="bi bi-plus-circle me-1"></i> {% trans "Submit Nutrition Guide" %}
                </a>
            {% else %}
                <a href="{% url 'submit_guide' %}?type=parent" class="btn btn-outline-primary btn-sm d-block">
                    <i class="bi bi-plus-circle me-1"></i> {% trans "Submit Parenting Guide" %}
                </a>
            {% endif %}
        </div>
    </div>
</div>